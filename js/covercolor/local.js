function coverColor(){const t=document.getElementById("post-cover")?.src;t&&localColor(t)}function localColor(t){const e=new Image;e.crossOrigin="Anonymous",e.onload=function(){const t=document.createElement("canvas");t.width=this.width,t.height=this.height;const e=t.getContext("2d");e.drawImage(this,0,0);const n=e.getImageData(0,0,this.width,this.height).data,{r:o,g:r,b:a}=calculateRGB(n);let c=rgbToHex(o,r,a);"light"===getContrastYIQ(c)&&(c=LightenDarkenColor(c,-50)),setThemeColors(c,o,r,a)},e.src=t}function rgbToHex(t,e,n){return"#"+[t,e,n].map((t=>t.toString(16).padStart(2,"0"))).join("")}function LightenDarkenColor(t,e){let n=!1;"#"===t[0]&&(t=t.slice(1),n=!0);const o=parseInt(t,16),r=Math.min(255,Math.max(0,(o>>16)+e)),a=Math.min(255,Math.max(0,(o>>8&255)+e));return`${n?"#":""}${(Math.min(255,Math.max(0,(255&o)+e))|a<<8|r<<16).toString(16).padStart(6,"0")}`}function getContrastYIQ(t){var e=colorRgb(t).match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),n=299*e[1]+587*e[2]+114*e[3];return(n/=255e3)>=.5?"light":"dark"}function colorRgb(t){if(!t||"string"!=typeof t)return t;const e=t.toLowerCase();let n="";if(e&&(/^#([0-9a-fA-f]{3})$/.test(e)||/^#([0-9a-fA-f]{6})$/.test(e))){n=4===e.length?e.replace(/^#(.)/g,"#$1$1"):e;const t=n.slice(1).match(/.{2}/g).map((t=>parseInt(t,16)));return`rgb(${t[0]}, ${t[1]}, ${t[2]})`}return e}